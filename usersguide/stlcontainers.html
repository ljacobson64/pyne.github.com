


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>C++ Standard Library Wrappers &mdash; PyNE 0.5-dev</title>
    
    <link rel="stylesheet" href="../_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
    <link rel="stylesheet" href="../" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.5-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bibtex_js.js"></script>
    <script type="text/javascript" src="../_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/toggle_sections.js"></script>
    <script type="text/javascript" src="../_static/toggle_sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/pyne_icon.ico"/>
    <link rel="top" title="PyNE 0.5-dev" href="../index.html" />
    <link rel="up" title="User’s Guide" href="index.html" />
    <link rel="next" title="JsonCpp: Python bindings for JsonCpp" href="jsoncpp.html" />
    <link rel="prev" title="Enrichment" href="enrichment.html" /> <script type="text/javascript">
var ga_enabled = !$.cookie('disable-ga');
if(ga_enabled){
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37452818-1']);
  _gaq.push(['_setCookiePath', '/']);
  _gaq.push(['_setDetectFlash', false]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
}
</script>
  </head>
  <body>
    <div class="relbar-top">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="jsoncpp.html" title="JsonCpp: Python bindings for JsonCpp"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="enrichment.html" title="Enrichment"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../gallery/index.html">Gallery</a> | </li>
    <li><a href="../index.html">PyNE</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">User&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="c-standard-library-wrappers">
<span id="usersguide-stlcontainers"></span><h1>C++ Standard Library Wrappers<a class="headerlink" href="#c-standard-library-wrappers" title="Permalink to this headline">¶</a></h1>
<p>Because they are useful, PyNE exposses a Python interface to many often used C++ standard libray
containers.  These are primarly used to efficiently deliver data from the low- to high-level
without excessive copying.</p>
<p>These wrapper classes allow you to initialize and/or modify the C++ containters after which they
are named.  Thus the wrappers give you a significant amount of control over the memory.  You can
choose whether or not you want to make a new instance of the underlying class.  (When using this
module from Python it is <em>highly</em> recommended that you always make a new object.  From Cython you
may not want to because you already have a pointer to the object you want to wrap.)  Additionally,
you may also choose whether, on the dereferncing of the wrapper object, if you also want to
deallocate the pointer.  (You may not want to deallocate if the pointer is shared by multiple wrappers.)</p>
<p>These wrappers exist in a separate Cython module. Please feel free to compile and link against them.
Or if you need a wrapper for a type that is not included, these wrappers make great templates
for your code as well!</p>
<div class="section" id="example-of-use">
<h2>Example of Use<a class="headerlink" href="#example-of-use" title="Permalink to this headline">¶</a></h2>
<p>From Python, the following represent common use cases:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pyne.stlcontainers</span> <span class="kn">as</span> <span class="nn">conv</span>

<span class="c"># New integer set</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">SetInt</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="k">assert</span> <span class="p">(</span><span class="mi">7</span> <span class="ow">in</span> <span class="n">s</span><span class="p">)</span>
<span class="k">assert</span> <span class="p">(</span><span class="mi">11</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span><span class="p">)</span>

<span class="c"># New string set</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">SetStr</span><span class="p">([</span><span class="s">&quot;Aha&quot;</span><span class="p">,</span> <span class="s">&quot;Take&quot;</span><span class="p">,</span> <span class="s">&quot;Me&quot;</span><span class="p">,</span> <span class="s">&quot;On&quot;</span><span class="p">])</span>
<span class="k">assert</span> <span class="p">(</span><span class="s">&quot;Aha&quot;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">)</span>
<span class="k">assert</span> <span class="p">(</span><span class="s">&quot;Captain Hammer&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span><span class="p">)</span>

<span class="c"># Two new mapping from strings to ints</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">MapStrInt</span><span class="p">({</span><span class="s">&#39;yes&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;no&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
<span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="k">assert</span> <span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="s">&#39;no&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

<span class="c"># Careful! We are only copying a view...</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">MapStrInt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">assert_equal</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="s">&#39;yes&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

<span class="c"># ...so m &amp; n point to the same underlying map!</span>
<span class="n">n</span><span class="p">[</span><span class="s">&#39;maybe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">assert_equal</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="s">&#39;maybe&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>In Cython, the use case is a little different because we have access to pointers
on the C++ level.  Suppose we already have a map that exists, we simply want to wrap it
and expose the python bindings.</p>
<div class="highlight-cython"><div class="highlight"><pre><span class="k">cimport</span> <span class="nn">pyne.stlcontainers</span> <span class="k">as</span> <span class="nn">conv</span>
<span class="k">import</span> <span class="nn">pyne.stlcontainers</span> <span class="k">as</span> <span class="nn">conv</span>

<span class="c"># Existing map</span>
<span class="k">def</span> <span class="nf">conv</span><span class="o">.</span><span class="n">_MapIntDouble</span> <span class="n">i_exist_proxy</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">MapIntDouble</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">i_exist_proxy</span><span class="o">.</span><span class="n">map_ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">i_exist_in_c</span>
<span class="n">i_exist_in_python</span> <span class="o">=</span> <span class="n">i_exist_proxy</span>

<span class="c"># Existing map &amp; owned by someone else</span>
<span class="k">def</span> <span class="nf">conv</span><span class="o">.</span><span class="n">_MapIntDouble</span> <span class="n">owned_elsewhere_proxy</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">MapIntDouble</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="n">owned_elsewhere_proxy</span><span class="o">.</span><span class="n">map_ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">owner</span><span class="o">.</span><span class="n">map_in_c</span>
<span class="n">owned_elsewhere_as_seen_in_python</span> <span class="o">=</span> <span class="n">owned_elsewhere_proxy</span>
</pre></div>
</div>
<p>Further information on this wrapper module, please refer to the library reference <a class="reference internal" href="../pyapi/stlcontainers.html#pyne-stlcontainers"><em>C++ Standard Library Converters &#8211; pyne.stlcontainers</em></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="../index.html">
          <img class="logo" src="../_static/pyne_icon_small.png" alt="Logo"/>
        </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">C++ Standard Library Wrappers</a><ul>
<li><a class="reference internal" href="#example-of-use">Example of Use</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="enrichment.html"
                        title="previous chapter">Enrichment</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="jsoncpp.html"
                        title="next chapter">JsonCpp: Python bindings for JsonCpp</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/usersguide/stlcontainers.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="jsoncpp.html" title="JsonCpp: Python bindings for JsonCpp"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="enrichment.html" title="Enrichment"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../gallery/index.html">Gallery</a> | </li>
    <li><a href="../index.html">PyNE</a> &raquo;</li>

          <li><a href="index.html" >User&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>
    </div>

    <div class="footer">
        &copy; Copyright 2011-2014, The PyNE Development Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div><script type="text/javascript">
    if(ga_enabled){
        document.write("<div class=\"footer\">This page uses <a href=\"http://analytics.google.com\">Google Analytics</a> to collect statistics. ");
        document.write("Click <button title=\"set cookie to disable analytics for this site\" class=\"link\" onclick=\"$.cookie('disable-ga', 'true', {expires: 3650, path: '/'}); window.location.reload(); return false; \">here</button> to disable analytics for this site.");
        document.write("</div>");
    }else{
        document.write("<div class=\"footer\">Google Analytics has been disabled. ");
        document.write("Click <button title=\"set cookie to re-enable analytics for this site\" class=\"link\" onclick=\"$.cookie('disable-ga', null, {path: '/'}); window.location.reload(); return false; \">here</button> to re-enable analytics for this site.");
    };
</script>
    <!-- cloud_sptheme 1.3 -->
  </body>
</html>